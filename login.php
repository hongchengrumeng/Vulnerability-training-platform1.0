<?php
error_reporting(0);//加上error_reporting(0);就不会弹出警告了
include('conn.php');
$username = $_POST['username'];
$password = $_POST['password'];
$sql = "select * from members where username = '$username' and password = MD5('$password')";
$user_query = mysql_query($sql,$conn) or die('mysql query error');
$rows=mysql_num_rows($user_query);

//print_r(mysql_fetch_row($user_query));
if($_GET['action'] == "logout"){
    unset($_SESSION['username']);
    session_unset('username');
    session_destroy('username');   
    echo '注销登录成功！点击此处 <a href="index.html">登录</a>';
    exit;
}
if ($rows == 1){
    if(!session_id()) {session_start();}
    session_start();
    $_SESSION['username'] = $username;
    echo $username.' 欢迎你！进入 <a href="web/index.php">个人中心</a><br />';
    echo '点击此处 <a href="login.php?action=logout">注销</a> 登录！<br />';
    exit;
} else {
    echo '用户名密码错误，点击此处 <a href="index.html">login</a> 登录！<br />';
}
?>